<section class="produto-destaque">
    <div class="produto-card">
        <div class="produto-imagem">
            <img class="produto-img" src="/imagens/bateriadearmazenamento1.jpg" alt="Placa Solar">
        </div>

        <div class="produto-detalhes">
            <h2 class="nome-produto">Bateria de Armazenamento</h2>
            <p class="produto-descricao">
                Bateria de Litio Weg para Sistema de Armazenamento de Energia Luna2000-5-e0 5kwh
            </p>
            <p class="produto-preco"><strong>Preço:</strong> R$ 28.540,84</p>
            
            <div class="botoes">
                <button class="produto-btn">Comprar</button>
                <button class="produto-btn adicionar-carrinho" onclick="adicionarCarrinho()">Adicionar ao Carrinho</button>
            </div>
        </div>
    </div>
</section>

<!-- Aba de Comentários - movida para abaixo do produto -->
<div class="comentarios">
    <h3>Comentários</h3>

    <div class="comentarios-lista" id="comentariosLista">
        <!-- Comentários serão inseridos aqui -->
    </div>

    <div class="comentario-adicionar">
        <textarea id="comentarioInput" placeholder="Deixe seu comentário..." rows="4"></textarea>
        <button onclick="adicionarComentario()">Adicionar Comentário</button>
    </div>
</div>

<script>
    // Função para adicionar produto ao carrinho
    function adicionarCarrinho() {
        alert('Produto adicionado ao carrinho!');
        // Lógica para adicionar o produto ao carrinho (aqui poderia ser uma requisição ao servidor)
    }

    // Função para adicionar um novo comentário
    function adicionarComentario() {
        const comentarioInput = document.getElementById('comentarioInput');
        const comentarioTexto = comentarioInput.value.trim();

        if (comentarioTexto === "") {
            alert("Por favor, escreva um comentário antes de enviar.");
            return;
        }

        const comentarioDiv = document.createElement('div');
        comentarioDiv.classList.add('comentario');
        
        // Criação do conteúdo do comentário
        const textoComentario = document.createElement('p');
        textoComentario.textContent = comentarioTexto;
        
        // Criação do botão de excluir
        const botaoExcluir = document.createElement('button');
        botaoExcluir.textContent = "Excluir";
        botaoExcluir.classList.add('excluir-comentario');
        botaoExcluir.onclick = function() {
            comentarioDiv.remove(); // Remove o comentário da lista
        };

        // Adicionando o comentário e o botão de excluir ao div
        comentarioDiv.appendChild(textoComentario);
        comentarioDiv.appendChild(botaoExcluir);
        
        // Adiciona o comentário à lista
        const comentariosLista = document.getElementById('comentariosLista');
        comentariosLista.appendChild(comentarioDiv);

        // Limpa o campo de texto
        comentarioInput.value = '';
    }
</script>

<style>
    /* Estilos para a seção de comentários */
    .comentarios {
        margin-top: 20px;
        padding: 15px;
        border-top: 1px solid #ddd;
    }

    .comentarios h3 {
        font-size: 1.5em;
    }

    .comentario-adicionar textarea {
        width: 100%;
        padding: 10px;
        font-size: 1em;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

    .comentario-adicionar button {
        background-color: #28a745;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .comentario-adicionar button:hover {
        background-color: #218838;
    }

    .comentarios-lista .comentario {
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #f9f9f9;
    }

    .comentarios-lista .comentario button.excluir-comentario {
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 5px 10px;
        margin-top: 10px;
        cursor: pointer;
    }

    .comentarios-lista .comentario button.excluir-comentario:hover {
        background-color: #c82333;
    }
</style>
<!-- Seção do Carrinho -->
<section class="carrinho mb-12">
    <h2 class="text-3xl font-semibold text-center mb-8">Carrinho de Compras</h2>
    <div id="carrinho">
      <p id="carrinhoVazio">Seu carrinho está vazio.</p>
    </div>
    <div class="text-center">
      <a href="/checkout"><button id="checkoutBtn" class="btn btn-primary py-2 px-4 rounded-md" disabled>Finalizar Compra</button></a>
    </div>
  </section>
  
  <!-- Botão do Carrinho -->
  <div class="fixed bottom-5 right-5">
    <button id="botaoCarrinho" class="btn btn-circle bg-gray-800 text-white">🛒</button>
  </div>
  <script>
  // Array para armazenar os produtos no carrinho
  let carrinho = [];
  
  // Função para adicionar um item ao carrinho
  function adicionarAoCarrinho(nomeProduto, precoProduto) {
    const item = {
      nome: nomeProduto,
      preco: precoProduto
    };
    
    carrinho.push(item);
    atualizarCarrinho();
  }
  
  // Função para atualizar a exibição do carrinho
  function atualizarCarrinho() {
    const carrinhoDiv = document.getElementById('carrinho');
    const carrinhoVazio = document.getElementById('carrinhoVazio');
    const checkoutBtn = document.getElementById('checkoutBtn');
    
    if (carrinho.length === 0) {
      carrinhoVazio.style.display = 'block';
      carrinhoDiv.innerHTML = '';
      checkoutBtn.disabled = true;
    } else {
      carrinhoVazio.style.display = 'none';
      carrinhoDiv.innerHTML = '';
      let total = 0;
      carrinho.forEach(item => {
        carrinhoDiv.innerHTML += `<p>${item.nome} - R$ ${item.preco.toFixed(2)}</p>`;
        total += item.preco;
      });
      carrinhoDiv.innerHTML += `<p><strong>Total: R$ ${total.toFixed(2)}</strong></p>`;
      checkoutBtn.disabled = false;
    }
  }
  
  // Exibição do carrinho ao clicar no ícone do carrinho
  document.getElementById('botaoCarrinho').addEventListener('click', () => {
    document.querySelector('.carrinho').style.display = 'block';
  });
</script>
